---
title: 'repository_dispatch ã«å¿…è¦ãª Fine-grained personal access tokens ã®æ¨©é™'
emoji: 'ğŸ”'
type: 'tech' # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ['GitHub Actions']
published: false
---

## çµè«–

`ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãŒã‚ã‚‹ãƒªãƒã‚¸ãƒˆãƒª` + `Contents ã® Read and write` ã§ãƒˆãƒªã‚¬ãƒ¼ã§ãã‚‹ã‚ˆ

## å‹•æ©Ÿ

ã‚°ã‚°ã£ã¦ãƒ”ãƒ³ãƒã‚¤ãƒ³ãƒˆã§å‡ºã¦ã“ãªã‹ã£ãŸã®ã§ã€èª¿æŸ»ã®è¨˜éŒ²ã‚’ä½œæˆã—ãŸã€‚
ã‚¤ãƒ™ãƒ³ãƒˆã®è©³ç´°ã‚„åˆ¥ç¨®ã®åˆ©ç”¨å¯èƒ½ãª Token ã«ã¤ã„ã¦ã¯ã€ç‰¹ã«è¨€åŠã—ãªã„ã€‚

## å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é †ã«èª­ã¿è§£ã

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ [repository_dispatch](https://docs.github.com/ja/actions/using-workflows/events-that-trigger-workflows#repository_dispatch)

GitHub API ã® Webhook ã‚¤ãƒ™ãƒ³ãƒˆ ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã®ã§ã€å½“è©² API ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã™ã‚‹ã€‚

### Webhooks [repository_dispatch](https://docs.github.com/ja/webhooks/webhook-events-and-payloads#repository_dispatch)

ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ `POST /repos/{owner}/{repo}/dispatches` ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚
ã¾ãŸã€ `GitHub App` ã§ã¯ `read-level access for the "Contents"` ãŒæœ€ä½é™å¿…è¦ã§ã‚ã‚‹ã“ã¨ã‚‚ã‚ã‹ã‚‹ã€‚
ã”ä¸å¯§ã«ä½¿ç”¨æ³•ãŒã‚ã‚‹ã®ã§ã€å…ˆã«ãã¡ã‚‰ã‚’ç¢ºèªã™ã‚‹ã€‚

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ [Create a repository dispatch event](https://docs.github.com/ja/rest/repos/repos?apiVersion=2022-11-28#create-a-repository-dispatch-event)

`GitHub ã‚¢ãƒ—ãƒª` ã®ã»ã‹ã€ `Fine-grained personal access tokens` ã‚‚åˆ©ç”¨å¯èƒ½ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚
ã¾ãŸã€ `contents:write` æ¨©é™ãŒå¿…è¦ã§ã‚ã‚‹ã“ã¨ã‚‚ã‚ã‹ã‚‹ã€‚

### å€‹äººãƒˆãƒ¼ã‚¯ãƒ³ã®æ¦‚è¦ [Fine-grained personal access tokens](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-fine-grained-personal-access-token)

ä½œæˆæ–¹æ³•ã®ãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ³ã‚¯ã¨ãªã‚‹ãŸã‚ã€ä¸€æ—¦è¿·å­ã«ãªã‚‹ãŒã€å®Ÿéš›ã«ä½œæˆã—ã¦ã„ãã¨ã€
Permissions ã®ä¸­ã«ã€ `Contents` ã®é¸æŠè‚¢ãŒã‚ã‚Šã€ `Access: Read and write` ã‚’é¸æŠã™ã‚Œã°ä¸€ä»¶è½ç€ã§ã‚ã‚‹ã€‚
